{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Akshay\\\\Desktop\\\\Complaint Tracker\\\\frontend\\\\src\\\\pages\\\\RegisterComplaint.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport Navbar from '../components/Navbar';\n\n/* ──────────────────────────────────────────────────────────\r\n   COMPONENT\r\n─────────────────────────────────────────────────────────── */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RegisterComplaint() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    search\n  } = useLocation();\n  const captureMode = new URLSearchParams(search).get('capture') === 'true';\n\n  /* refs for camera -------------------------------------------------------- */\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  /* state ------------------------------------------------------------------ */\n  const [formData, setFormData] = useState({\n    category: 'Garbage',\n    description: '',\n    address: '',\n    lat: '',\n    lng: '',\n    priority: 'Medium'\n  });\n  const [image, setImage] = useState(null); // File object\n  const [imagePreview, setImagePreview] = useState(null); // base-64\n  const [cameraStream, setCameraStream] = useState(null);\n  const [showCamera, setShowCamera] = useState(false);\n  const [isGettingLoc, setIsGettingLoc] = useState(false);\n  const [locError, setLocError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitOK, setSubmitOK] = useState(false);\n\n  /* ──────────────────────────────────────────────────────────\r\n     GEOLOCATION\r\n  ─────────────────────────────────────────────────────────── */\n  const reverseGeocode = useCallback(async (lat, lng) => {\n    try {\n      const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18`);\n      const json = await res.json();\n      if (json !== null && json !== void 0 && json.display_name) {\n        setFormData(p => ({\n          ...p,\n          address: json.display_name\n        }));\n      }\n    } catch (err) {\n      console.error('Reverse-geocode error:', err);\n    }\n  }, []);\n  const getLocation = useCallback(() => {\n    setIsGettingLoc(true);\n    setLocError('');\n    if (!navigator.geolocation) {\n      setLocError('Geolocation not supported.');\n      setIsGettingLoc(false);\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      const {\n        latitude,\n        longitude\n      } = pos.coords;\n      setFormData(p => ({\n        ...p,\n        lat: latitude.toFixed(6),\n        lng: longitude.toFixed(6)\n      }));\n      reverseGeocode(latitude, longitude);\n      setIsGettingLoc(false);\n    }, err => {\n      console.error('Geolocation error:', err);\n      setLocError('Unable to get location (permission denied or unavailable).');\n      setIsGettingLoc(false);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 300000\n    });\n  }, [reverseGeocode]);\n\n  /* ──────────────────────────────────────────────────────────\r\n     CAMERA\r\n  ─────────────────────────────────────────────────────────── */\n  const startCamera = useCallback(async () => {\n    try {\n      // stop previous stream\n      cameraStream === null || cameraStream === void 0 ? void 0 : cameraStream.getTracks().forEach(t => t.stop());\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment',\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        },\n        audio: false\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        videoRef.current.onloadedmetadata = () => videoRef.current.play();\n      }\n      setCameraStream(stream);\n      setShowCamera(true);\n    } catch (err) {\n      if (err.name === 'NotAllowedError') {\n        alert('Camera permission denied.  Please allow access and try again.');\n      } else {\n        alert('Unable to open camera.');\n      }\n      console.error(err);\n    }\n  }, [cameraStream]);\n  const stopCamera = () => {\n    cameraStream === null || cameraStream === void 0 ? void 0 : cameraStream.getTracks().forEach(t => t.stop());\n    setCameraStream(null);\n    setShowCamera(false);\n  };\n  const takePhoto = () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    const v = videoRef.current;\n    const c = canvasRef.current;\n    c.width = v.videoWidth;\n    c.height = v.videoHeight;\n    c.getContext('2d').drawImage(v, 0, 0, c.width, c.height);\n    const dataUrl = c.toDataURL('image/jpeg', 0.8);\n    setImagePreview(dataUrl);\n\n    // convert to File so size/type info is preserved (optional)\n    fetch(dataUrl).then(r => r.blob()).then(blob => {\n      const file = new File([blob], `complaint-${Date.now()}.jpg`, {\n        type: 'image/jpeg'\n      });\n      setImage(file);\n    });\n    stopCamera();\n  };\n\n  /* ──────────────────────────────────────────────────────────\r\n     EFFECTS\r\n  ─────────────────────────────────────────────────────────── */\n  useEffect(() => {\n    getLocation(); // first load\n    if (captureMode) startCamera();\n    return stopCamera; // cleanup\n  }, [captureMode, getLocation, startCamera]);\n\n  /* ──────────────────────────────────────────────────────────\r\n     FORM HANDLERS\r\n  ─────────────────────────────────────────────────────────── */\n  const onChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(p => ({\n      ...p,\n      [name]: value\n    }));\n  };\n  const onFile = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/')) return alert('Select an image.');\n    if (file.size > 5 * 1024 * 1024) return alert('Max 5 MB.');\n    setImage(file);\n    const reader = new FileReader();\n    reader.onloadend = () => setImagePreview(reader.result);\n    reader.readAsDataURL(file);\n  };\n  const onSubmit = async e => {\n    e.preventDefault();\n    if (!formData.address) return alert('Waiting for location…');\n    setIsSubmitting(true);\n    try {\n      const {\n        createComplaint\n      } = await import('../services/complaintService');\n      await createComplaint({\n        category: formData.category,\n        description: formData.description,\n        priority: formData.priority,\n        address: formData.address,\n        latitude: Number(formData.lat) || null,\n        longitude: Number(formData.lng) || null,\n        image: imagePreview,\n        // base-64 string\n        status: 'pending'\n      });\n      setSubmitOK(true);\n      setTimeout(() => {\n        setSubmitOK(false);\n        navigate('/dashboard');\n      }, 1500);\n    } catch (err) {\n      alert('Submit failed. Check console.');\n      console.error(err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  /* ──────────────────────────────────────────────────────────\r\n     RENDER\r\n  ─────────────────────────────────────────────────────────── */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), showCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black/70\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium mb-2\",\n          children: \"Capture Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          className: \"w-full rounded-md\",\n          playsInline: true,\n          muted: true,\n          autoPlay: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex justify-end gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopCamera,\n            className: \"px-3 py-1.5 border rounded-md text-gray-700 hover:bg-gray-50\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: takePhoto,\n            className: \"px-4 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700\",\n            children: \"Capture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-4xl mx-auto py-8 px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-6\",\n        children: \"Register a Complaint\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), submitOK && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 rounded-md bg-green-50 border border-green-300 text-green-700\",\n        children: \"Complaint submitted \\u2714\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid sm:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"category\",\n              value: formData.category,\n              onChange: onChange,\n              className: \"mt-1 w-full border rounded p-2\",\n              children: ['Garbage', 'Water Leakage', 'Pothole', 'Electricity Issue', 'Street Light', 'Sewage', 'Other'].map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                children: c\n              }, c, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: \"Priority\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"priority\",\n              value: formData.priority,\n              onChange: onChange,\n              className: \"mt-1 w-full border rounded p-2\",\n              children: ['Low', 'Medium', 'High'].map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                children: p\n              }, p, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            rows: 4,\n            required: true,\n            value: formData.description,\n            onChange: onChange,\n            className: \"mt-1 w-full border rounded p-2\",\n            placeholder: \"Describe the issue\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Detected address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), isGettingLoc ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-blue-600 text-sm\",\n            children: \"Fetching location\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this) : locError ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-600 text-sm\",\n            children: locError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"w-full border rounded p-2 bg-gray-50\",\n            value: formData.address,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this), formData.lat && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-600\",\n            children: [formData.lat, \", \", formData.lng, ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: getLocation,\n              className: \"underline text-blue-600 ml-2\",\n              children: \"refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm block\",\n            children: \"Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              ref: fileInputRef,\n              onChange: onFile,\n              className: \"hidden\",\n              id: \"fileInput\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"fileInput\",\n              className: \"px-3 py-1.5 border rounded cursor-pointer hover:bg-gray-50\",\n              children: \"Choose file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: startCamera,\n              className: \"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700\",\n              children: \"Take photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-600\",\n              children: image ? image.name || 'captured-photo.jpg' : 'No image yet'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imagePreview,\n              alt: \"preview\",\n              className: \"max-h-40 rounded border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: isSubmitting,\n          className: \"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-60\",\n          children: isSubmitting ? 'Submitting…' : 'Submit Complaint'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterComplaint, \"0vImyirJK49OosIDnyULWxlPQlw=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = RegisterComplaint;\nexport default RegisterComplaint;\nvar _c;\n$RefreshReg$(_c, \"RegisterComplaint\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","useLocation","useNavigate","Navbar","jsxDEV","_jsxDEV","RegisterComplaint","_s","navigate","search","captureMode","URLSearchParams","get","videoRef","canvasRef","fileInputRef","formData","setFormData","category","description","address","lat","lng","priority","image","setImage","imagePreview","setImagePreview","cameraStream","setCameraStream","showCamera","setShowCamera","isGettingLoc","setIsGettingLoc","locError","setLocError","isSubmitting","setIsSubmitting","submitOK","setSubmitOK","reverseGeocode","res","fetch","json","display_name","p","err","console","error","getLocation","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","coords","toFixed","enableHighAccuracy","timeout","maximumAge","startCamera","getTracks","forEach","t","stop","stream","mediaDevices","getUserMedia","video","facingMode","width","ideal","height","audio","current","srcObject","onloadedmetadata","play","name","alert","stopCamera","takePhoto","v","c","videoWidth","videoHeight","getContext","drawImage","dataUrl","toDataURL","then","r","blob","file","File","Date","now","type","onChange","e","value","target","onFile","files","startsWith","size","reader","FileReader","onloadend","result","readAsDataURL","onSubmit","preventDefault","createComplaint","Number","status","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","playsInline","muted","autoPlay","onClick","map","rows","required","placeholder","readOnly","accept","id","htmlFor","src","alt","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Akshay/Desktop/Complaint Tracker/frontend/src/pages/RegisterComplaint.js"],"sourcesContent":["import React, {\r\n  useState,\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n} from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport Navbar from '../components/Navbar';\r\n\r\n/* ──────────────────────────────────────────────────────────\r\n   COMPONENT\r\n─────────────────────────────────────────────────────────── */\r\nfunction RegisterComplaint() {\r\n  const navigate           = useNavigate();\r\n  const { search }         = useLocation();\r\n  const captureMode        = new URLSearchParams(search).get('capture') === 'true';\r\n\r\n  /* refs for camera -------------------------------------------------------- */\r\n  const videoRef           = useRef(null);\r\n  const canvasRef          = useRef(null);\r\n  const fileInputRef       = useRef(null);\r\n\r\n  /* state ------------------------------------------------------------------ */\r\n  const [formData, setFormData]         = useState({\r\n    category    : 'Garbage',\r\n    description : '',\r\n    address     : '',\r\n    lat         : '',\r\n    lng         : '',\r\n    priority    : 'Medium',\r\n  });\r\n  const [image, setImage]               = useState(null);       // File object\r\n  const [imagePreview, setImagePreview] = useState(null);       // base-64\r\n  const [cameraStream, setCameraStream] = useState(null);\r\n  const [showCamera, setShowCamera]     = useState(false);\r\n  const [isGettingLoc, setIsGettingLoc] = useState(false);\r\n  const [locError, setLocError]         = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitOK, setSubmitOK]         = useState(false);\r\n\r\n  /* ──────────────────────────────────────────────────────────\r\n     GEOLOCATION\r\n  ─────────────────────────────────────────────────────────── */\r\n  const reverseGeocode = useCallback(async (lat, lng) => {\r\n    try {\r\n      const res  = await fetch(\r\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18`,\r\n      );\r\n      const json = await res.json();\r\n      if (json?.display_name) {\r\n        setFormData((p) => ({ ...p, address: json.display_name }));\r\n      }\r\n    } catch (err) {\r\n      console.error('Reverse-geocode error:', err);\r\n    }\r\n  }, []);\r\n\r\n  const getLocation = useCallback(() => {\r\n    setIsGettingLoc(true);\r\n    setLocError('');\r\n\r\n    if (!navigator.geolocation) {\r\n      setLocError('Geolocation not supported.');\r\n      setIsGettingLoc(false);\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        setFormData((p) => ({\r\n          ...p,\r\n          lat: latitude.toFixed(6),\r\n          lng: longitude.toFixed(6),\r\n        }));\r\n        reverseGeocode(latitude, longitude);\r\n        setIsGettingLoc(false);\r\n      },\r\n      (err) => {\r\n        console.error('Geolocation error:', err);\r\n        setLocError('Unable to get location (permission denied or unavailable).');\r\n        setIsGettingLoc(false);\r\n      },\r\n      { enableHighAccuracy: true, timeout: 10_000, maximumAge: 300_000 },\r\n    );\r\n  }, [reverseGeocode]);\r\n\r\n  /* ──────────────────────────────────────────────────────────\r\n     CAMERA\r\n  ─────────────────────────────────────────────────────────── */\r\n  const startCamera = useCallback(async () => {\r\n    try {\r\n      // stop previous stream\r\n      cameraStream?.getTracks().forEach((t) => t.stop());\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } },\r\n        audio: false,\r\n      });\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.onloadedmetadata = () => videoRef.current.play();\r\n      }\r\n      setCameraStream(stream);\r\n      setShowCamera(true);\r\n    } catch (err) {\r\n      if (err.name === 'NotAllowedError') {\r\n        alert('Camera permission denied.  Please allow access and try again.');\r\n      } else {\r\n        alert('Unable to open camera.');\r\n      }\r\n      console.error(err);\r\n    }\r\n  }, [cameraStream]);\r\n\r\n  const stopCamera = () => {\r\n    cameraStream?.getTracks().forEach((t) => t.stop());\r\n    setCameraStream(null);\r\n    setShowCamera(false);\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    const v = videoRef.current;\r\n    const c = canvasRef.current;\r\n    c.width  = v.videoWidth;\r\n    c.height = v.videoHeight;\r\n    c.getContext('2d').drawImage(v, 0, 0, c.width, c.height);\r\n\r\n    const dataUrl = c.toDataURL('image/jpeg', 0.8);\r\n    setImagePreview(dataUrl);\r\n\r\n    // convert to File so size/type info is preserved (optional)\r\n    fetch(dataUrl)\r\n      .then((r) => r.blob())\r\n      .then((blob) => {\r\n        const file = new File([blob], `complaint-${Date.now()}.jpg`, { type: 'image/jpeg' });\r\n        setImage(file);\r\n      });\r\n\r\n    stopCamera();\r\n  };\r\n\r\n  /* ──────────────────────────────────────────────────────────\r\n     EFFECTS\r\n  ─────────────────────────────────────────────────────────── */\r\n  useEffect(() => {\r\n    getLocation();            // first load\r\n    if (captureMode) startCamera();\r\n\r\n    return stopCamera;        // cleanup\r\n  }, [captureMode, getLocation, startCamera]);\r\n\r\n  /* ──────────────────────────────────────────────────────────\r\n     FORM HANDLERS\r\n  ─────────────────────────────────────────────────────────── */\r\n  const onChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((p) => ({ ...p, [name]: value }));\r\n  };\r\n\r\n  const onFile = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (!file.type.startsWith('image/')) return alert('Select an image.');\r\n    if (file.size > 5 * 1024 * 1024) return alert('Max 5 MB.');\r\n\r\n    setImage(file);\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => setImagePreview(reader.result);\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.address) return alert('Waiting for location…');\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const { createComplaint } = await import('../services/complaintService');\r\n      await createComplaint({\r\n        category    : formData.category,\r\n        description : formData.description,\r\n        priority    : formData.priority,\r\n        address     : formData.address,\r\n        latitude    : Number(formData.lat) || null,\r\n        longitude   : Number(formData.lng) || null,\r\n        image       : imagePreview,          // base-64 string\r\n        status      : 'pending',\r\n      });\r\n      setSubmitOK(true);\r\n      setTimeout(() => {\r\n        setSubmitOK(false);\r\n        navigate('/dashboard');\r\n      }, 1500);\r\n    } catch (err) {\r\n      alert('Submit failed. Check console.');\r\n      console.error(err);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  /* ──────────────────────────────────────────────────────────\r\n     RENDER\r\n  ─────────────────────────────────────────────────────────── */\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <Navbar />\r\n\r\n      {/* ─── Camera Modal ─────────────────────────────────── */}\r\n      {showCamera && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70\">\r\n          <div className=\"bg-white p-4 rounded-lg w-full max-w-md\">\r\n            <h3 className=\"text-lg font-medium mb-2\">Capture Photo</h3>\r\n            <video ref={videoRef} className=\"w-full rounded-md\" playsInline muted autoPlay />\r\n            <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n            <div className=\"mt-4 flex justify-end gap-3\">\r\n              <button\r\n                onClick={stopCamera}\r\n                className=\"px-3 py-1.5 border rounded-md text-gray-700 hover:bg-gray-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={takePhoto}\r\n                className=\"px-4 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n              >\r\n                Capture\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ─── Main Form ────────────────────────────────────── */}\r\n      <main className=\"max-w-4xl mx-auto py-8 px-4\">\r\n        <h2 className=\"text-2xl font-semibold mb-6\">Register a Complaint</h2>\r\n\r\n        {submitOK && (\r\n          <div className=\"mb-4 p-3 rounded-md bg-green-50 border border-green-300 text-green-700\">\r\n            Complaint submitted ✔\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={onSubmit} className=\"space-y-6\">\r\n          {/* Category & Priority */}\r\n          <div className=\"grid sm:grid-cols-2 gap-4\">\r\n            <label className=\"block\">\r\n              <span className=\"text-sm\">Category</span>\r\n              <select\r\n                name=\"category\"\r\n                value={formData.category}\r\n                onChange={onChange}\r\n                className=\"mt-1 w-full border rounded p-2\"\r\n              >\r\n                {['Garbage', 'Water Leakage', 'Pothole', 'Electricity Issue',\r\n                  'Street Light', 'Sewage', 'Other'].map((c) => (\r\n                  <option key={c}>{c}</option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n\r\n            <label className=\"block\">\r\n              <span className=\"text-sm\">Priority</span>\r\n              <select\r\n                name=\"priority\"\r\n                value={formData.priority}\r\n                onChange={onChange}\r\n                className=\"mt-1 w-full border rounded p-2\"\r\n              >\r\n                {['Low', 'Medium', 'High'].map((p) => (\r\n                  <option key={p}>{p}</option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          <label className=\"block\">\r\n            <span className=\"text-sm\">Description</span>\r\n            <textarea\r\n              name=\"description\"\r\n              rows={4}\r\n              required\r\n              value={formData.description}\r\n              onChange={onChange}\r\n              className=\"mt-1 w-full border rounded p-2\"\r\n              placeholder=\"Describe the issue…\"\r\n            />\r\n          </label>\r\n\r\n          {/* Location (auto only) */}\r\n          <div className=\"space-y-2\">\r\n            <p className=\"text-sm\">\r\n              <strong>Detected address</strong>\r\n            </p>\r\n            {isGettingLoc ? (\r\n              <p className=\"text-blue-600 text-sm\">Fetching location…</p>\r\n            ) : locError ? (\r\n              <p className=\"text-red-600 text-sm\">{locError}</p>\r\n            ) : (\r\n              <input\r\n                className=\"w-full border rounded p-2 bg-gray-50\"\r\n                value={formData.address}\r\n                readOnly\r\n              />\r\n            )}\r\n            {formData.lat && (\r\n              <p className=\"text-xs text-gray-600\">\r\n                {formData.lat}, {formData.lng}{' '}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={getLocation}\r\n                  className=\"underline text-blue-600 ml-2\"\r\n                >\r\n                  refresh\r\n                </button>\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Image Section */}\r\n          <div className=\"space-y-2\">\r\n            <span className=\"text-sm block\">Photo</span>\r\n            <div className=\"flex items-center gap-3 flex-wrap\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                ref={fileInputRef}\r\n                onChange={onFile}\r\n                className=\"hidden\"\r\n                id=\"fileInput\"\r\n              />\r\n              <label\r\n                htmlFor=\"fileInput\"\r\n                className=\"px-3 py-1.5 border rounded cursor-pointer hover:bg-gray-50\"\r\n              >\r\n                Choose file\r\n              </label>\r\n              <button\r\n                type=\"button\"\r\n                onClick={startCamera}\r\n                className=\"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n              >\r\n                Take photo\r\n              </button>\r\n              <span className=\"text-sm text-gray-600\">\r\n                {image ? image.name || 'captured-photo.jpg' : 'No image yet'}\r\n              </span>\r\n            </div>\r\n\r\n            {imagePreview && (\r\n              <div className=\"mt-2\">\r\n                <img\r\n                  src={imagePreview}\r\n                  alt=\"preview\"\r\n                  className=\"max-h-40 rounded border\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Submit */}\r\n          <button\r\n            disabled={isSubmitting}\r\n            className=\"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-60\"\r\n          >\r\n            {isSubmitting ? 'Submitting…' : 'Submit Complaint'}\r\n          </button>\r\n        </form>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterComplaint;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}