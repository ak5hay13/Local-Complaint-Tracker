{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Akshay\\\\Desktop\\\\Complaint Tracker\\\\frontend\\\\src\\\\pages\\\\CameraTest.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CameraTest() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [thumb, setThumb] = useState(null);\n  const [stream, setStream] = useState(null);\n\n  /* ───── open camera on mount ─────────────────────────── */\n  useEffect(() => {\n    (async () => {\n      try {\n        const s = await navigator.mediaDevices.getUserMedia({\n          video: {\n            facingMode: 'environment'\n          },\n          audio: false\n        });\n        setStream(s);\n        videoRef.current.srcObject = s;\n        await videoRef.current.play();\n      } catch (err) {\n        alert(`Camera error: ${err.name}`);\n        console.error(err);\n      }\n    })();\n\n    /* cleanup on unmount */\n    return () => stream === null || stream === void 0 ? void 0 : stream.getTracks().forEach(t => t.stop());\n  }, []); //  ← empty deps on purpose\n\n  /* ───── capture frame ────────────────────────────────── */\n  const snap = () => {\n    const v = videoRef.current;\n    const c = canvasRef.current;\n    if (!v || !c || v.videoWidth === 0) return alert('Video not ready');\n    c.width = v.videoWidth;\n    c.height = v.videoHeight;\n    c.getContext('2d').drawImage(v, 0, 0, c.width, c.height);\n    const dataUrl = c.toDataURL('image/jpeg', 0.8);\n    setThumb(dataUrl);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex flex-col items-center justify-center gap-6 bg-gray-100 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-xl font-semibold\",\n      children: \"\\uD83D\\uDCF8 Camera-only test page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"w-full max-w-xs rounded border\",\n      playsInline: true,\n      muted: true,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: snap,\n      className: \"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",\n      children: \"Capture frame\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), thumb && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: thumb,\n      alt: \"thumbnail\",\n      className: \"max-h-40 rounded border shadow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(CameraTest, \"cHtWlsWq5yoVqrLnmUZ6BQU0O64=\");\n_c = CameraTest;\nvar _c;\n$RefreshReg$(_c, \"CameraTest\");","map":{"version":3,"names":["useEffect","useRef","useState","jsxDEV","_jsxDEV","CameraTest","_s","videoRef","canvasRef","thumb","setThumb","stream","setStream","s","navigator","mediaDevices","getUserMedia","video","facingMode","audio","current","srcObject","play","err","alert","name","console","error","getTracks","forEach","t","stop","snap","v","c","videoWidth","width","height","videoHeight","getContext","drawImage","dataUrl","toDataURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","playsInline","muted","autoPlay","onClick","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/Akshay/Desktop/Complaint Tracker/frontend/src/pages/CameraTest.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function CameraTest() {\r\n  const videoRef   = useRef(null);\r\n  const canvasRef  = useRef(null);\r\n  const [thumb, setThumb] = useState(null);\r\n  const [stream, setStream] = useState(null);\r\n\r\n  /* ───── open camera on mount ─────────────────────────── */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const s = await navigator.mediaDevices.getUserMedia({\r\n          video: { facingMode: 'environment' },\r\n          audio: false,\r\n        });\r\n        setStream(s);\r\n        videoRef.current.srcObject = s;\r\n        await videoRef.current.play();\r\n      } catch (err) {\r\n        alert(`Camera error: ${err.name}`);\r\n        console.error(err);\r\n      }\r\n    })();\r\n\r\n    /* cleanup on unmount */\r\n    return () => stream?.getTracks().forEach((t) => t.stop());\r\n  }, []);                        //  ← empty deps on purpose\r\n\r\n  /* ───── capture frame ────────────────────────────────── */\r\n  const snap = () => {\r\n    const v = videoRef.current;\r\n    const c = canvasRef.current;\r\n    if (!v || !c || v.videoWidth === 0) return alert('Video not ready');\r\n\r\n    c.width  = v.videoWidth;\r\n    c.height = v.videoHeight;\r\n    c.getContext('2d').drawImage(v, 0, 0, c.width, c.height);\r\n\r\n    const dataUrl = c.toDataURL('image/jpeg', 0.8);\r\n    setThumb(dataUrl);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center gap-6 bg-gray-100 p-6\">\r\n      <h1 className=\"text-xl font-semibold\">📸 Camera-only test page</h1>\r\n\r\n      <video\r\n        ref={videoRef}\r\n        className=\"w-full max-w-xs rounded border\"\r\n        playsInline\r\n        muted\r\n        autoPlay\r\n      />\r\n\r\n      <canvas ref={canvasRef} className=\"hidden\" />\r\n\r\n      <button\r\n        onClick={snap}\r\n        className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n      >\r\n        Capture frame\r\n      </button>\r\n\r\n      {thumb && (\r\n        <img\r\n          src={thumb}\r\n          alt=\"thumbnail\"\r\n          className=\"max-h-40 rounded border shadow\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}